<div class="container mt-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Transactions</h3>
    <a routerLink="/transaction-add" class="btn btn-primary">+ Add Transaction</a>
  </div>

  @if (transactions.length === 0) {
    <div class="text-muted">No transactions yet.</div>
  }

  @for (tx of transactions; track tx) {
    <div class="card mb-2 p-2 position-relative">
      <div>
        <strong>{{ tx.date }} - {{ tx.type }} - {{ tx.amount | number:'1.2-2' }}</strong>
        <div class="text-muted small">({{ tx.category }})</div>
      </div>
      <button class="btn btn-sm btn-light position-absolute top-0 end-0" (click)="toggleMenu(tx)">â‹®</button>

      @if (tx.showMenu) {
        <div class="position-absolute bg-white border rounded shadow-sm"
             style="top: 30px; right: 10px; z-index: 10; width: 120px;">
          <button class="btn btn-sm w-100 text-start" (click)="editTransaction(tx)">Edit</button>
          <button class="btn btn-sm w-100 text-start text-danger" (click)="deleteTransaction(tx)">Delete</button>
        </div>
      }
    </div>
  }
</div>
